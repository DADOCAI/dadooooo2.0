# 产品规划思维导图

## 1 产品愿景
### 1.1 阶段A：工具合集（现在）
- ASCII 生成器
- 像素化工具
- 其他小视觉特效
- 纯前端 + Vercel 部署

### 1.2 阶段B：平台化（下一步）
- 统一登录
- 会员付费墙
- 工具权限控制
- 云端保存作品

### 1.3 阶段C：创意生态（未来）
- 社区分享
- 模板市场
- 插件/主题商店
- 多语言 & 移动端

## 2 用户体系（用 Supabase 一键开启）
### 2.1 注册/登录
- 邮箱+密码
- 第三方（Google/GitHub）
- 忘记密码邮件

### 2.2 个人资料
- 头像、昵称
- 会员等级徽章
- 用量统计（本月已用次数）

### 2.3 权限中间件
- 未登录 → 只能看 Demo
- 登录 → 基础免费额度
- Pro/VIP → 解锁高阶功能

## 3 会员等级（简单三档）
### 3.1 Free
- 每日 5 次导出
- 带水印
- 480p 输出

### 3.2 Pro（月付/年付）
- 每日 50 次
- 无水印
- 1080p 输出
- 云端保存 30 天

### 3.3 VIP（终身或高年付）
- 无限次数
- 4K 输出
- 永久云端保存
- 抢先体验新工具

## 4 卡密系统（外部购买 → 网站激活）
### 4.1 生成端（你用后台或第三方）
- 卡密 = 16 位随机码
- 批次绑定「Pro 月卡」「VIP 年卡」

### 4.2 兑换流程
- 用户输入卡密 → 系统验证 → 升级会员 → 标记已用

### 4.3 安全要点
- 一次兑换即失效
- 可导出 CSV 给淘宝/闲鱼发货

## 5 Supabase 最小表结构
### 5.1 users（自动生成）
- id / email / 创建时间

### 5.2 profiles
- user_id（主键）
- nickname / avatar_url
- tier = free|pro|vip
- expires_at（会员到期日）

### 5.3 redeem_codes
- code（主键）
- tier / duration_days
- used_by_user_id（空=未用）
- used_at

### 5.4 usage_logs
- user_id / tool_id / 动作（export）
- created_at（按天统计）

### 5.5 projects（云端作品）
- id / user_id / tool_id
- title / preview_url
- file_urls（JSON 数组）
- created_at

## 6 Cloudflare R2 用途
### 6.1 存什么
- 用户上传的原始视频/图片
- 导出后的高分辨率文件
- 网站公用的字体、模板、贴图

### 6.2 为什么选 R2
- 无 egress 费（下载不计流量）
- 与 Vercel 全球 CDN 自动联动
- 兼容 S3 接口，一行配置即可

### 6.3 目录规划
- /uploads/{user_id}/input/...
- /exports/{user_id}/output/...
- /assets/public/...（模板、字体）

## 7 前端架构（Vercel + Supabase）
### 7.1 技术栈
- Next.js（React）或 原生 Vite
- Tailwind + 你 Figma 稿
- Supabase JS 客户端（Auth + DB + Storage）

### 7.2 页面路由
- /login /register /profile
- /tools/ascii /tools/pixelate ...
- /pricing（会员价目）
- /redeem（卡密兑换）

### 7.3 环境变量（Vercel 里填）
- NEXT_PUBLIC_SUPABASE_URL
- NEXT_PUBLIC_SUPABASE_ANON_KEY
- R2 的密钥（后端 API 用）

## 8 扩展路线图
### 8.1 近期（1–2 周）
- 接入 Supabase 登录
- 免费/Pro 权限判断
- 卡密兑换页

### 8.2 中期（1–2 月）
- 用量统计 + 超限提示
- R2 上传/下载
- 云端「我的作品」列表

### 8.3 远期（3–6 月）
- 收藏 & 历史记录
- 新工具接入（毛玻璃、故障风）
- 移动端 PWA
- 多语言 / 深色模式

# 执行优先级路线图（设计师视角）

## 第 1 步：让网站「认得」人
1. 注册 Supabase 项目 → 开 Auth（邮箱+Google）
2. 把登录/注册页做出来（抄 Supabase 官方例子即可）
3. 在现有工具页顶部加「登录」按钮 → 未登录时弹提示

## 第 2 步：加会员壳子
1. profiles 表加 tier & expires_at
2. pricing 页三栏卡片（Free/Pro/VIP）+ Stripe 订阅链接（可先放「即将上线」）
3. 工具代码里加「权限门」→ 判断 tier 是否足够，不够弹「升级 Pro」

## 第 3 步：卡密激活
1. redeem_codes 表导入一批卡密（CSV）
2. /redeem 页 → 输入框 + 兑换按钮 → 写 Supabase 函数验证 & 更新用户 tier
3. 把兑换成功页跳回 profile，看到会员到期日

## 第 4 步：云端存储
1. 开 R2 存储桶 → 建 uploads / exports 目录
2. 用户点「保存到云端」→ 文件先传 R2，再把 url 写进 projects 表
3. /profile 下加「我的作品」列表 → 点卡片可重新下载

## 第 5 步：数据看板 & 优化
1. usage_logs 记录每日用量 → 后台简单 SQL 统计
2. 工具页实时提示「今日剩余 X 次」
3. 根据反馈再微调帧率、分辨率、水印位置

完成以上 5 步，你就拥有：
✅ 可登录、可付费、可云端保存的专业工具站
✅ 设计师也能维护的「无后端」架构
✅ 后续想加新工具，只需在表结构里加一行 tool_id 即可

拿着这份导图，你可以：
- 让 AI 按模块逐一生成代码
- 用 Figma 先画对应界面，再交给 AI 还原
- 每完成一步就部署到 Vercel，随时给用户看进度